# Author: vexcv
# Update: 2024.12.25
# Telegram: https://t.me/vexcso

subscribe-url: http://your-another-service-provider  # è®¢é˜…é“¾æ¥ï¼Œç”¨äºä»æœåŠ¡å•†è·å–èŠ‚ç‚¹ä¿¡æ¯

mixed-port: 7890  # æ··åˆä»£ç†ç«¯å£ï¼Œç”¨äºæ¥æ”¶ HTTPã€HTTPS å’Œ SOCKS5 çš„è¯·æ±‚
allow-lan: true  # æ˜¯å¦å…è®¸å±€åŸŸç½‘è®¾å¤‡é€šè¿‡æœ¬åœ°ä»£ç†è®¿é—®
bind-address: '*'  # ä»£ç†ç¨‹åºç›‘å¬çš„åœ°å€ï¼Œ'*' è¡¨ç¤ºç›‘å¬æ‰€æœ‰ç½‘ç»œæ¥å£
mode: rule  # ä»£ç†æ¨¡å¼ï¼šruleï¼ˆæŒ‰è§„åˆ™åˆ†æµï¼‰ã€globalï¼ˆå…¨å±€ä»£ç†ï¼‰ã€directï¼ˆå…¨å±€ç›´è¿ï¼‰
log-level: warning  # æ—¥å¿—çº§åˆ«ï¼šwarningï¼ˆè­¦å‘Šï¼‰ã€infoï¼ˆä¸€èˆ¬ä¿¡æ¯ï¼‰ã€debugï¼ˆè°ƒè¯•ï¼‰
ipv6: false  # æ˜¯å¦å¯ç”¨ IPv6 æ”¯æŒ

profile:  # ç¨‹åºè¿è¡Œæ—¶çš„é…ç½®å­˜å‚¨é€‰é¡¹
  store-selected: true  # æ˜¯å¦ä¿å­˜ç”¨æˆ·ä¸Šæ¬¡é€‰æ‹©çš„ä»£ç†èŠ‚ç‚¹
  tracing: false  # æ˜¯å¦å¯ç”¨è¿½è¸ªæ¨¡å¼ï¼ˆç”¨äºè°ƒè¯•ï¼‰
  store-fake-ip: false  # æ˜¯å¦ä¿å­˜è™šæ‹Ÿ IP æ˜ å°„ï¼Œé€‚ç”¨äº fake-ip æ¨¡å¼

unified-delay: true  # ç»Ÿä¸€å»¶è¿Ÿä¼˜åŒ–ï¼Œå‡å°‘è§„åˆ™è§£æå¯¹æ€§èƒ½çš„å½±å“

hosts:  # é™æ€ä¸»æœºæ˜ å°„
  dnslog.cn: 47.244.138.18  # å°†åŸŸå dnslog.cn é™æ€è§£æä¸ºæŒ‡å®š IP åœ°å€

dns:  # å†…ç½® DNS é…ç½®
  enable: true  # æ˜¯å¦å¯ç”¨å†…ç½® DNS æœåŠ¡
  ipv6: false  # æ˜¯å¦æ”¯æŒ IPv6 åœ°å€çš„ DNS è§£æ
  listen: '0.0.0.0:1053'  # DNS æœåŠ¡ç›‘å¬çš„åœ°å€å’Œç«¯å£
  enhanced-mode: fake-ip  # DNS å¢å¼ºæ¨¡å¼ï¼šfake-ipï¼ˆä½¿ç”¨è™šæ‹Ÿ IPï¼‰ã€redir-hostï¼ˆè¿”å›çœŸå® IPï¼‰Fake-IP æ¨¡å¼ä¼šä¸ºæœªè§£æçš„åŸŸååˆ†é…è™šæ‹Ÿ IPï¼Œå¯èƒ½ä¼šä¸æŸäº›ç‰¹å®šåº”ç”¨ï¼ˆå¦‚å±€åŸŸç½‘å…±äº«ã€æŸäº›æ¸¸æˆæœåŠ¡ï¼‰ä¸å…¼å®¹ã€‚å¦‚æœé‡åˆ°å…¼å®¹æ€§é—®é¢˜ï¼Œå¯ä»¥åˆ‡æ¢ä¸º redir-host æ¨¡å¼ï¼š
  fake-ip-range: 198.18.0.1/16  # è™šæ‹Ÿ IP åœ°å€èŒƒå›´ï¼Œfake-ip æ¨¡å¼ä¸‹ä½¿ç”¨
  use-hosts: true  # æ˜¯å¦ä½¿ç”¨ hosts æ˜ å°„è¡¨
  default-nameserver: # é»˜è®¤çš„ä¸Šæ¸¸ DNS æœåŠ¡å™¨
    - 223.5.5.5 # é˜¿é‡Œ
    - 119.28.28.28 # è…¾è®¯
    - system # ç³»ç»Ÿ
  nameserver:  # DoHï¼ˆDNS over HTTPSï¼‰æœåŠ¡å™¨åˆ—è¡¨
    - 'quic://1.1.1.1:853' # Cloudflare DoQæœåŠ¡
    # - 'quic://8.8.8.8:853' # Google DoQæœåŠ¡
    - 'https://doh.pub/dns-query'  # è…¾è®¯å…¬å…± DNS çš„ DoH æœåŠ¡
    - 'https://1.1.1.1/dns-query' # Cloudflareå…¬å…± DNS çš„ DoH æœåŠ¡
  fake-ip-filter:  # fake-ip æ¨¡å¼ä¸‹ä¸ä½¿ç”¨è™šæ‹Ÿ IP çš„åŸŸå
    - '*.lan'  # åŒ¹é…æ‰€æœ‰ .lan åç¼€çš„åŸŸå
    - localhost.ptlogin2.qq.com  # è…¾è®¯æœ¬åœ°ç™»å½•æœåŠ¡
    - dns.msftncsi.com  # Windows ç½‘ç»œè¿é€šæ€§æ£€æµ‹
    - '*.srv.nintendo.net'  # Nintendo Switch æœåŠ¡
    - '*.stun.playstation.net'  # PlayStation ç½‘ç»œ
    - 'xbox.*.microsoft.com'  # Xbox æœåŠ¡
    - '*.xboxlive.com'  # Xbox Live æœåŠ¡
  fallback:  # å¤‡ç”¨ DNS æœåŠ¡å™¨ï¼Œç”¨äºä¸» DNS è§£æå¤±è´¥æ—¶
    - 1.1.1.1  # Cloudflare å…¬å…± DNS
    - 8.8.8.8  # Google å…¬å…± DNS
  fallback-filter:  # å¤‡ç”¨ DNS çš„è¿‡æ»¤è§„åˆ™
    geoip: true  # å¯ç”¨ GEOIP è¿‡æ»¤ï¼ˆåŸºäºåœ°ç†ä½ç½®åˆ¤æ–­æ˜¯å¦ä»£ç†ï¼‰
    geoip-code: CN  # è¿‡æ»¤è§„åˆ™çš„å›½å®¶ç 
    ipcidr:  # å¤‡ç”¨ DNS éœ€è¦è¿‡æ»¤çš„ IP èŒƒå›´
      - 240.0.0.0/4  # å¹¿æ’­åœ°å€ç­‰ç‰¹æ®Š IP æ®µ

proxy-providers:  # èŠ‚ç‚¹æä¾›å•†é…ç½®
  SSRDOG:
    interval: 14400  # æ¯éš” 14400 ç§’ï¼ˆ4 å°æ—¶ï¼‰æ›´æ–°ä¸€æ¬¡èŠ‚ç‚¹ä¿¡æ¯
    url: http://your-another-service-provider  # æä¾›å•†çš„è®¢é˜…é“¾æ¥

proxy-groups:  # åŠŸèƒ½åˆ†æµç»„å’Œåœ°åŒºåˆ†æµç»„é…ç½®
  - name: Proxy  # é»˜è®¤ä»£ç†ç»„ï¼Œæ‰‹åŠ¨é€‰æ‹©èŠ‚ç‚¹
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Proxy.png
    type: select
    include-all: true
  - name: Auto  # è‡ªåŠ¨é€‰æ‹©å»¶è¿Ÿæœ€ä½çš„èŠ‚ç‚¹
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    interval: 300  # æµ‹è¯•é—´éš” 300 ç§’
    lazy: true
    tolerance: 50
    include-all: true
  - name: OpenAI  # OpenAI æµé‡åˆ†æµç»„
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Google
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Google_Search.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Apple
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Apple.png
    type: select
    proxies:
      - 'DIRECT'
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Microsoft
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Microsoft.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
      - 'DIRECT'
  - name: PayPal
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/PayPal.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
      - 'DIRECT'
  - name: YouTube
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/YouTube.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: NETFLIX
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Netflix.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Spotify
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Spotify.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
      - 'DIRECT'
  - name: Disney+
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Disney+.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: TikTok
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/TikTok.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
      - 'DIRECT'
  - name: BiliBili
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/bilibili_3.png
    type: select
    proxies:
      - 'DIRECT'
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Steam
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Steam.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
      - 'DIRECT'
  - name: Telegram
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Telegram.png
    type: select
    proxies:
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Mainland
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Domestic.png
    type: select
    proxies:
      - 'DIRECT'
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Uncaptured
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Server.png
    type: select
    proxies:
      - 'DIRECT'
      - 'Proxy'
      - 'Hong Kong'
      - 'Taiwan'
      - 'Japan'
      - 'South Korea'
      - 'Singapore'
      - 'United States'
      - 'Other Regions'
  - name: Hong Kong
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Hong_Kong.png
    interval: 14400
    lazy: true
    tolerance: 50
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    include-all: true
    filter: "(?i)(æ¾³é—¨|ğŸ‡²ğŸ‡´|æ¸¯|ğŸ‡­ğŸ‡°|hk|hong)"
  - name: Taiwan
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Taiwan.png
    interval: 14400
    lazy: true
    tolerance: 50
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    include-all: true
    filter: "(?i)(å°|ğŸ‡¹ğŸ‡¼|æ¹¾|tw|taiwan)"
  - name: Japan
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Japan.png
    interval: 14400
    lazy: true
    tolerance: 50
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    include-all: true
    filter: "(?i)(æ—¥|ğŸ‡¯ğŸ‡µ|ä¸œäº¬|å¤§é˜ª|jp|japan)"
  - name: South Korea
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Korea.png
    interval: 14400
    lazy: true
    tolerance: 50
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    include-all: true
    filter: "(?i)(éŸ©|ğŸ‡°ğŸ‡·|kr|korea)"
  - name: Singapore
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/Singapore.png
    interval: 14400
    lazy: true
    tolerance: 50
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    include-all: true
    filter: "(?i)(æ–°åŠ å¡|å¡|ç‹®åŸ|ğŸ‡¸ğŸ‡¬|sg|singapore)"
  - name: United States
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/United_States.png
    interval: 14400
    lazy: true
    tolerance: 50
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    include-all: true
    filter: "(?i)(ç¾|ğŸ‡ºğŸ‡²|us|states|america)"
  - name: Other Regions
    icon: https://testingcf.jsdelivr.net/gh/Koolson/Qure/IconSet/Color/World_Map.png
    interval: 14400
    lazy: true
    tolerance: 50
    type: url-test
    url: "http://cp.cloudflare.com/generate_204"
    include-all: true
    filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¹ğŸ‡¼|ğŸ‡¯ğŸ‡µ|ğŸ‡°ğŸ‡·|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hong|å°|tw|taiwan|æ—¥æœ¬|jp|japan|éŸ©|kr|korea|ç¾|us|states|æ–°åŠ å¡|sg|singapore)).*"
rule-providers:
  category-ai-chat-!cn:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/category-ai-chat-!cn.list
  google:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/google.list
  apple:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/apple.list
  microsoft:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft.list
  paypal:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/paypal.list
  youtube:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/youtube.list
  netflix:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/netflix.list
  spotify:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/spotify.list
  disney:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/disney.list
  tiktok:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/tiktok.list
  bilibili:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/bilibili.list
  steam:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/steam.list
  telegram:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/telegram.list
  microsoft@cn:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/microsoft@cn.list
  steam@cn:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/MetaCubeX/meta-rules-dat@meta/geo/geosite/steam@cn.list
  ASN:
    type: http
    interval: 86400
    behavior: domain
    format: text
    url: https://testingcf.jsdelivr.net/gh/Coldvvater/Mononoke/Stash/Rules/ChinaASN.list
rules:
  # - â€˜SCRIPT,quic,REJECTâ€˜ # åˆ é™¤æˆ–æ³¨é‡Šæ‰è§„åˆ™ï¼Œå…è®¸ QUIC åè®®é€šè¿‡, æˆ–è®¾ç½®åŒ¹é…ç­–ç•¥ç»„ã€‚
  - 'DOMAIN,dog.ssrdog.com,Proxy'
  - 'DOMAIN-KEYWORD,linkedin,Proxy'
  - 'RULE-SET,category-ai-chat-!cn,OpenAI'
  - 'RULE-SET,google,Google'
  - 'RULE-SET,apple,Apple'
  - 'RULE-SET,microsoft,Microsoft'
  - 'RULE-SET,paypal,PayPal'
  - 'RULE-SET,youtube,YouTube'
  - 'RULE-SET,netflix,NETFLIX'
  - 'RULE-SET,spotify,Spotify'
  - 'RULE-SET,disney,Disney+'
  - 'RULE-SET,tiktok,TikTok'
  - 'RULE-SET,bilibili,BiliBili'
  - 'RULE-SET,steam,Steam'
  - 'RULE-SET,telegram,Telegram'
  - 'RULE-SET,microsoft@cn,Mainland'
  - 'RULE-SET,steam@cn,Mainland'
  - 'DOMAIN,local.adguard.org,DIRECT'
  - 'DOMAIN-SUFFIX,local,DIRECT'
  - 'IP-CIDR,127.0.0.0/8,DIRECT'
  - 'IP-CIDR,172.16.0.0/12,DIRECT'
  - 'IP-CIDR,192.168.0.0/16,DIRECT'
  - 'IP-CIDR,10.0.0.0/8,DIRECT'
  - 'IP-CIDR,17.0.0.0/8,DIRECT'
  - 'IP-CIDR,100.64.0.0/10,DIRECT'
  - 'IP-CIDR,224.0.0.0/4,DIRECT'
  - 'IP-CIDR,203.0.113.0/24,DIRECT'
  - 'IP-CIDR,192.0.2.0/24,DIRECT'
  - 'IP-CIDR6,fe80::/10,DIRECT'
  # - 'GEOIP,CN,DIRECT'
  # - 'GEOIP,LAN,DIRECT'
  # âš æ³¨æ„ï¼šæœ¬é…ç½®ç›®å‰ä¸»æµä½¿ç”¨ASNè§„åˆ™ä½œä¸ºä¸­å›½å¤§é™†åˆ†æµï¼Œå¦‚ä¸æƒ³ä½¿ç”¨ï¼Œè¯·åœ¨ASNè§„åˆ™å‰é¢åŠ #å·æ³¨é‡Šï¼ŒåŒæ—¶æŠŠMainland-rulesã€MainlandIP-rulesåŠGEOIPå‰é¢çš„#å·åˆ é™¤æ”¾è¡Œä½¿å…¶ç”Ÿæ•ˆã€‚
  - 'RULE-SET,ASN,DIRECT'
  - 'MATCH,Proxy'
script:
  shortcuts:
    quic: network == 'udp' and dst_port == 443
    #åŠŸèƒ½ï¼š
      #å®šä¹‰ä¸€ä¸ªå¿«æ·è§„åˆ™ quicï¼Œç”¨æ¥åŒ¹é…æ‰€æœ‰ä½¿ç”¨ UDP ä¸”ç›®æ ‡ç«¯å£ä¸º 443 çš„æµé‡ã€‚
      #è¯¥è§„åˆ™ä¸ä¼šç›´æ¥å½±å“æµé‡ï¼Œåªæ˜¯ç”¨äºæ ‡è®°æˆ–åŒ¹é… QUIC æµé‡ã€‚
    #ä½¿ç”¨åœºæ™¯ï¼š
      #åˆ†æµï¼šè¯†åˆ« QUIC æµé‡åï¼Œå°†å…¶åˆ†é…åˆ°ä¸åŒçš„ä»£ç†ç»„æˆ–ç›´æ¥è¿æ¥ã€‚
      #é˜»æ­¢ï¼šåœ¨ä¸ä½¿ç”¨ QUIC æ—¶ï¼Œé…åˆ REJECT è§„åˆ™ç¦æ­¢å…¶é€šè¿‡ã€‚
